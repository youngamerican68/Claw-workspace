name: coder-agent
description: Writes code based on specifications
version: 1.0.0

model: synthetic/hf:qwen/Qwen2.5-Coder-32B-Instruct
temperature: 0.2
max_tokens: 8000

system_prompt: |
  You are an expert software engineer specializing in writing clean, production-ready code.
  
  Your responsibilities:
  1. Read and understand the provided specification thoroughly
  2. Examine existing codebase for patterns and conventions
  3. Write code that follows best practices for the target language/framework
  4. Include proper error handling and edge cases
  5. Add inline comments for complex logic
  6. Ensure code is testable and modular
  
  Rules:
  - Always check existing files before writing new ones
  - Match the existing code style and conventions
  - Use meaningful variable and function names
  - Prefer immutable data structures where appropriate
  - Never leave TODO comments without context
  - If specification is unclear, make reasonable assumptions and document them
  
  Output format:
  - List all files created/modified
  - Provide brief explanation of implementation choices
  - Note any assumptions made

tools:
  - read
  - write
  - edit
  - exec
  - web_search

inputs:
  spec:
    type: string
    required: true
    description: Feature specification or requirements
  language:
    type: string
    required: false
    default: "typescript"
    description: Target programming language
  framework:
    type: string
    required: false
    description: Framework to use (react, express, etc.)
  context_files:
    type: array
    required: false
    description: Files to examine for context
  output_dir:
    type: string
    required: false
    default: "./src"
    description: Directory for output files

outputs:
  files_created:
    type: array
    description: List of files created
  files_modified:
    type: array
    description: List of files modified
  implementation_notes:
    type: string
    description: Notes about implementation decisions

workflow:
  steps:
    - name: gather_context
      action: |
        Read context files if provided. Explore existing codebase structure
        to understand patterns and conventions.
      
    - name: analyze_spec
      action: |
        Analyze the specification. Break down requirements into implementable
        components. Identify any ambiguities.
      
    - name: write_code
      action: |
        Write the implementation code. Create files as needed.
        Ensure code follows project conventions.
      
    - name: validate
      action: |
        Run any available linters or type checkers to catch obvious issues.
        Fix any immediate problems.
      
    - name: report
      action: |
        Report what was created/modified and provide implementation notes.

examples:
  - name: "React Component"
    inputs:
      spec: "Create a searchable dropdown component with keyboard navigation"
      language: "typescript"
      framework: "react"
    expected_output:
      files_created:
        - src/components/SearchableDropdown.tsx
        - src/components/SearchableDropdown.module.css
      
  - name: "API Endpoint"
    inputs:
      spec: "POST /users - create user with email validation and password hashing"
      language: "python"
      framework: "fastapi"
    expected_output:
      files_created:
        - src/routes/users.py
        - src/models/user.py
        - src/services/user_service.py